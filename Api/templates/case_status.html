<!DOCTYPE html>
<html>
    <head>
        <title>WEB自动化测试用例</title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        {% set pro_name = tasks['pro_name'] %}
        {% set nginx_api_proxy = tasks['nginx_api_proxy'] %}
        {% set test_case_list = tasks['test_case_list'] %}
        {# 注 释 语 句 #}
        <link href="/{{nginx_api_proxy}}/static/css/bootstrap.min.css" rel="stylesheet">
    </head>

    <body>
        <div id="page-wrapper">
            <div class="header" align="center">
                <h1 class="page-header"> WEB自动化测试用例 - {{pro_name}}项目 </h1>
            </div>
            <div id="page-inner" style="margin-left:35%">
               <div class="row">
                  <div class="col-lg-12">
                     <div class="col-xs-12 col-md-6">
                         <div class="panel panel-default">
                             <div class="panel-heading" align="center" style="font-size:15px; color: #B8860B; font-weight: bold;">
                                 设 置 {{pro_name}} 项 目 所 有 用 例 的 状 态
                             </div>
                             <div class="panel-body">
                                <div class="col-sm-2"></div>
                                <div class="col-sm-3" align="center">
                                    <button id="on_line_all" type="button" class="btn btn-success"
                                            onclick="update_case_status_all('{{pro_name}}','true','{{nginx_api_proxy}}')"> 上 线 </button>
                                </div>
                                <div class="col-sm-2"></div>
                                <div class="col-sm-3" align="center">
                                    <button id="off_line_all" type="button" class="btn btn-danger"
                                            onclick="update_case_status_all('{{pro_name}}','false','{{nginx_api_proxy}}')"> 下 线 </button>
                                </div>
                             </div>
                         </div>
                     </div>
                  </div>
               </div>
            </div>
        </div>


        <table id='result_table' class="table table-condensed table-bordered table-hover">
            <tr id='header_row' class="text-center btn-primary" style="font-weight: bold;font-size: 15px;">
                <td width="150">状  态</td>
                <td width="350">用 例 名 称</td>
                <td width="150">类 名 称</td>
                <td width="150">方 法 名 称</td>
                <td width="150">创 建 时 间</td>
            </tr>
            {% for test_case in test_case_list %}
                {% set status = test_case.status %}
                {% set test_case_name = test_case.test_case_name %}
                {% set test_class_name = test_case.test_class_name %}
                {% set test_method_name = test_case.test_method_name %}
                {% set create_time = test_case.create_time %}
                {% if status %}
                    <tr id="on_line_{{test_method_name}}_tr" class='passClass success'>
                        <td class="text-center" style="display:table-cell; vertical-align:middle">
                            <button id="on_line_{{test_method_name}}" type="button" class="btn btn-success btn-sm"
                                    onclick="update_case_status('{{pro_name}}','{{test_method_name}}','{{nginx_api_proxy}}')"> 上 线 </button>
                        </td>
                {% else %}
                    <tr id="off_line_{{test_method_name}}_tr" class='passClass danger'>
                        <td class="text-center" style="display:table-cell; vertical-align:middle">
                            <button id="off_line_{{test_method_name}}" type="button" class="btn btn-danger btn-sm"
                                    onclick="update_case_status('{{pro_name}}','{{test_method_name}}','{{nginx_api_proxy}}')"> 下 线 </button>
                        </td>
                {% endif %}
                        <td class="text-center" style="display:table-cell; vertical-align:middle">{{test_case_name}}</td>
                        <td class="text-center" style="display:table-cell; vertical-align:middle">{{test_class_name}}</td>
                        <td class="text-center" style="display:table-cell; vertical-align:middle">{{test_method_name}}</td>
                        <td class="text-center" style="display:table-cell; vertical-align:middle">{{create_time}}</td>
                    </tr>
            {% endfor %}
        </table>

        <div id='ending'>&nbsp;</div>
        <div style=" position:fixed;right:50px; bottom:30px; width:20px; height:20px;cursor:pointer">
            <a href="#"><span class="glyphicon glyphicon-eject" style = "font-size:30px;" aria-hidden="true"></span></a>
        </div>

        <script src="/{{nginx_api_proxy}}/static/scripts/jquery.min.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/bootstrap.min.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/common.js" type="text/javascript"></script>
        <script src="/{{nginx_api_proxy}}/static/scripts/case_status.js" type="text/javascript"></script>

    </body>
</html>
